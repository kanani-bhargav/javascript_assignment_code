<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Budget</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet" />
  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css" />
</head>

<body onload="allrecord()">

  <div class="wrapper">
    <div class="container">
      <div class="sub-container">
        <!-- Budget -->
        <div class="total-amount-container">
          <h3>Budget</h3>
          <p class="hide error" id="budget-error">
            Value cannot be empty or negative
          </p>
          <input type="number" id="total-amount" placeholder="Enter Total Amount" />
          <button type="button  " class="submit" id="set-budget-btn">Set Budget</button>
        </div>

        <!-- Expenditure -->
        <div class="user-amount-container">
          <h3>Expenses</h3>
          <p class="hide error" id="product-title-error">
            Values cannot be empty
          </p>
          <input type="text" class="product-title" id="product-title" placeholder="Enter Title of Product" />
          <input type="number" id="user-amount" placeholder="Enter Cost of Product" />
          <button type="button" class="submit" id="expense-btn">Check Amount</button>
        </div>
      </div>
      <!-- Output -->
      <div class="output-container flex-space">
        <div>
          <p>Total Budget</p>
          <span id="amount">0</span>
        </div>
        <div>
          <p>Expenses</p>
          <span id="expenditure-value">0</span>
        </div>
        <div>
          <p>Balance</p>
          <span id="balance-amount">0</span>
        </div>
      </div>
    </div>
    <!-- List -->
    <div class="container" id="record">
      <div class="list">
        <h3>Expense List</h3>
        <div class="list-container" id="list">

        </div>
      </div>


    </div>

    <!-- Script -->
    <script src="script.js"></script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>
    <!-- <script>
      let set_budget_btn = document.getElementById('set-budget-btn')
      let expense_btn = document.getElementById('expense-btn')
      set_budget_btn.addEventListener('click', set_budget)
      expense_btn.addEventListener('click', expenses)

      function allrecord() {
        let set_budget = JSON.parse(localStorage.getItem('set_budget'))
        let ex_budget = JSON.parse(localStorage.getItem('budget_details'))
        let total_budget = 0;
        let sum = 0
        for (let x of set_budget) {
          total_budget += x.set_amount
        }
        document.getElementById('amount').innerHTML = total_budget
        for (x of ex_budget) {
          sum += x.ex_amount
        }
        document.getElementById("expenditure-value").innerHTML = sum
        document.getElementById('balance-amount').innerHTML = total_budget - sum
      }

      function set_budget() {
        let total_amount = document.getElementById('total-amount')
        let budget_error = document.getElementById('budget-error')
        if (total_amount.value != "") {
          budget_error.style.display = "none"
          let amount = document.getElementById('amount')
          let data = JSON.parse(localStorage.getItem("set_budget")) || []
          let sum = 0
          let obj = {
            set_amount: parseFloat(total_amount.value)
          }
          data.push(obj)
          for (x of data) {
            sum += x.set_amount
          }
          document.getElementById("amount").innerHTML = sum

          localStorage.setItem("set_budget", JSON.stringify(data))
          amount.innerHTML = sum
          total_amount.value = ""
          total_balance()
        }
        else {
          budget_error.style.display = "block"
        }
      }

      function expenses() {
        let product_title = document.getElementById('product-title')
        let expanse_amount = document.getElementById('user-amount')
        let product_title_error = document.getElementById('product-title-error')
        if ((product_title.value != "") && (expanse_amount.value != "")) {
          product_title_error.style.display = "none"
          let expenditure_value = document.getElementById("expenditure-value")

          let data = JSON.parse(localStorage.getItem("budget_details")) || []
          let obj = {
            title: product_title.value,
            ex_amount: parseFloat(expanse_amount.value)
          }
          data.push(obj)
          let sum = 0
          for (x of data) {
            sum += x.ex_amount
          }
          expenditure_value.innerHTML = sum

          localStorage.setItem("budget_details", JSON.stringify(data))
          total_balance()
          viewdata()
          expanse_amount.value = ""
          product_title.value = ""
        }
        else {
          product_title_error.style.display = "block"
        }
      }

      function total_balance() {
        let amount = document.getElementById('amount')
        let expenditure_value = document.getElementById('expenditure-value')
        let balance_amount = document.getElementById('balance-amount')
        let balance = parseFloat(amount.innerHTML) - parseFloat(expenditure_value.innerHTML)
        balance_amount.innerHTML = balance
      }

      function viewdata() {
        let data = JSON.parse(localStorage.getItem("budget_details"))
        let tbl = ""
        data.forEach((val) => {
          tbl += `
                         <div class="row py-1 rounded-3">
                            <div class="col-6 bg-secondary ps-3 rounded-start">${val.title}</div>
                            <div class="col-6 bg-secondary text-end pe-5 rounded-end">${val.ex_amount}</div>
                          </div>
          `
        });
        document.getElementById("list").innerHTML = tbl
      }


    </script> -->
</body>

</html>