<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working with dom</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <div class="container-fluid">
        <div class="d-flex justify-content-around">
            <button class="btn btn-outline-success mb-3" id="thisbtn">show data</button>
            <button class="btn btn-outline-success mb-3" id="removebtn">remove data</button>
        </div>
        <table class="table table-dark table-striped ">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>User Name</th>
                    <th>Email</th>
                    <th>Address</th>
                    <th>Phone</th>
                    <th>Website</th>
                    <th>company</th>
                </tr>
            </thead>
            <tbody id="record" >
            </tbody>
        </table>

    </div>
    

    <script>
        
        
        let btn=document.getElementById("thisbtn");
        btn.addEventListener("click",showdata)
        
        function showdata(){
            let data=JSON.parse(localStorage.getItem("store"))
            if((localStorage.getItem("store")==undefined) ||(localStorage.getItem("store")==null) ){
                fetch("https://jsonplaceholder.typicode.com/users").then((response)=> response.json()).then((json)=>{
         localStorage.setItem("store",JSON.stringify(json))
        })
            }
            else{
                viewdata(data) 
            }
        }
        function viewdata(input){
            let arr=input; 
            let tbl="";
            arr.map((val)=>{
                tbl+=`
                <tr>
                    <td>${val.id}</td>
                    <td>${val.name}</td>
                    <td>${val.username}</td>
                    <td>${val.email}</td>
                    <td >
                        <div>City - ${val.address.city}</div>
                        <div>Street - ${val.address.street}</div>
                        <div>Zipcode -${val.address.zipcode}</div>
                        </td>
                        <td>${val.phone}</td>
                        <td>${val.website}</td>
                        <td>${val.company.name}</td>
                        </tr>
                        `
                        document.getElementById("record").innerHTML=tbl
                    })
                }
                
                let removebtn=document.getElementById("removebtn")
                removebtn.addEventListener("click",removehandler)
                function removehandler(){
                    // btn.removeEventListener("click",showdata)
                    let allremove = localStorage.removeItem("store");
                    document.getElementById("record").innerHTML=""
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>